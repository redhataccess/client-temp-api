"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function Account(){var t=(0,_urijs2.default)("");return{url:t.toString(),init:function(e){t.pathname(e),t.segment("account/products")},getProducts:function(e){return t.setQuery(e),fetch(t.toString(),{credentials:"same-origin"}).then(checkStatus).then(parseJSON).then(formatJSON).catch(handleError)}}}function AccountSettings(){var t=(0,_urijs2.default)("");return{url:t.toString(),init:function(e){t.pathname(e),t.segment("account/settings")},getSettings:function(){return fetch(t.toString(),{credentials:"same-origin"}).then(checkStatus).then(parseJSON).catch(handleError)},updateSettings:function(e){return fetch(t.toString(),{method:"POST",body:e}).then(checkStatus).then(parseJSON).catch(handleError)}}}function Ack(){var t=(0,_urijs2.default)("");return{url:t.toString(),init:function(e){t.segment(e),t.segment("acks")},getAcks:function(e){var r=t.clone();return r.addSearch("include","rule"),e&&r.addSearch("account_number",e),fetch(r.toString(),{credentials:"same-origin"}).then(checkStatus).then(parseJSON).catch(handleError)},createAck:function(e,r){var n=t.clone();return e&&n.addSearch("account_number",e),fetch(n.toString(),{method:"POST",credentials:"same-origin",body:JSON.stringify(r)}).then(checkStatus).then(parseJSON).catch(handleError)}}}function checkStatus(t){if(t.status>=200&&t.status<300)return _bluebird2.default.resolve(t);var e=new Error(t.statusText);throw e.response=t,e}function parseJSON(t){return t.json()}function formatJSON(t){return{data:t}}function handleError(t){console.log("request faild",t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Account=Account,exports.AccountSettings=AccountSettings,exports.Ack=Ack,require("fetch");var _urijs=require("urijs"),_urijs2=_interopRequireDefault(_urijs);require("babel/browser-polyfill");var _bluebird=require("bluebird"),_bluebird2=_interopRequireDefault(_bluebird);